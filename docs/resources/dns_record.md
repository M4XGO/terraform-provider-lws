---
page_title: "lws_dns_record Resource"
subcategory: ""
description: |-
  LWS DNS record resource with automatic ID drift detection and robust error handling
---

# lws_dns_record (Resource)

LWS DNS record resource

## Example Usage

```terraform
# Example DNS A record
resource "lws_dns_record" "www" {
  zone  = "example.com"
  name  = "www"
  type  = "A"
  value = "192.168.1.1"
  ttl   = 3600
}

# Example DNS CNAME record
resource "lws_dns_record" "blog" {
  zone  = "example.com"
  name  = "blog"
  type  = "CNAME"
  value = "www.example.com"
  ttl   = 3600
}

# Example DNS MX record
resource "lws_dns_record" "mail" {
  zone  = "example.com"
  name  = "@"
  type  = "MX"
  value = "10 mail.example.com"
  ttl   = 3600
}

# Example DNS TXT record for domain verification
resource "lws_dns_record" "verification" {
  zone  = "example.com"
  name  = "@"
  type  = "TXT"
  value = "v=spf1 include:_spf.google.com ~all"
  ttl   = 300
}

# Example with explicit TTL management
resource "lws_dns_record" "api" {
  zone  = "example.com"
  name  = "api"
  type  = "A"
  value = "10.0.1.100"
  ttl   = 300  # Short TTL for dynamic IPs
}
```

## Features

### üîß Automatic ID Drift Detection
The provider automatically detects when the LWS API changes record IDs and recovers gracefully by:
- Detecting missing IDs during read operations
- Falling back to name/type-based record lookup
- Automatically updating the Terraform state with the new ID
- Preventing unnecessary resource recreation

### üõ°Ô∏è Robust Error Handling
- Validates required fields (name, type, value, zone) before API calls
- Provides detailed error messages for debugging
- Handles API rate limits and temporary failures gracefully
- Supports both create and update-existing-record workflows

### üìä Enhanced Debugging
Enable detailed logging with:
```bash
export TF_LOG=DEBUG
terraform plan  # or apply
```

Debug logs include:
- API request/response details
- Record ID tracking and drift detection
- Validation steps and error details
- State management operations

## Supported Record Types

| Type   | Description                    | Value Format                           |
|--------|--------------------------------|----------------------------------------|
| A      | IPv4 address                   | `192.168.1.1`                        |
| AAAA   | IPv6 address                   | `2001:db8::1`                         |
| CNAME  | Canonical name                 | `www.example.com`                     |
| MX     | Mail exchange                  | `10 mail.example.com`                |
| TXT    | Text record                    | `v=spf1 include:_spf.google.com ~all`|
| NS     | Name server                    | `ns1.example.com`                     |
| SOA    | Start of authority             | `ns1.example.com admin.example.com`  |
| SRV    | Service locator                | `10 5 443 target.example.com`        |
| PTR    | Pointer record                 | `example.com`                         |
| SPF    | Sender Policy Framework        | `v=spf1 a mx ~all`                   |
| CAA    | Certificate Authority Auth     | `0 issue letsencrypt.org`            |

## Import

DNS records can be imported using their ID:

```bash
terraform import lws_dns_record.example 12345
```

The provider will automatically fetch the record details and update the state.

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) DNS record name (use "@" for root domain)
- `type` (String) DNS record type (A, AAAA, CNAME, MX, TXT, etc.)
- `value` (String) DNS record value (format depends on record type)
- `zone` (String) DNS zone name (e.g., "example.com")

### Optional

- `ttl` (Number) DNS record TTL in seconds. Defaults to 86400 (24 hours)

### Read-Only

- `id` (String) DNS record identifier (managed automatically by LWS API)

## Notes

- The provider automatically handles existing records by updating them instead of creating duplicates
- Record IDs may change during updates due to LWS API behavior - this is handled transparently
- Changes to `zone` will force recreation of the resource
- Validation ensures proper format for each record type 